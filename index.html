<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Index</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Index</h1>
    
    


    


    <h3> </h3>









    




    <section>
        <article><h1 id="connect-once-npm-version-npm-image-npm-url-build-status-travis-image-travis-url-coverage-status-coveralls-image-coveralls-url-dependency-status-depstat-image-depstat-url-">connect-once <a href="https://npmjs.org/package/connect-once"><img src="https://badge.fury.io/js/connect-once.png" alt="NPM version"></a> <a href="http://travis-ci.org/floatdrop/connect-once"><img src="https://travis-ci.org/floatdrop/connect-once.png?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/floatdrop/connect-once"><img src="https://coveralls.io/repos/floatdrop/connect-once/badge.png" alt="Coverage Status"></a> <a href="https://david-dm.org/floatdrop/connect-once"><img src="https://david-dm.org/floatdrop/connect-once.png?theme=shields.io" alt="Dependency Status"></a></h1>
<blockquote>
<p>Connect once and memorize connection for next usages</p>
</blockquote>
<h2 id="usage">Usage</h2>
<p>Install package with npm:</p>
<p><code>npm i connect-once --save</code></p>
<p>Then create a connection:</p>
<pre><code class="lang-js">var connectOnce = require(&#39;connect-once&#39;);

var connection = new connectOnce({ 
    retries: 60, 
    reconnectWait: 1000
}, MongoClient.connect, &#39;mongodb://localhost/test&#39;);

connection.when(&#39;available&#39;, function (err, db) {
    // Do stuff
});
</code></pre>
<h2 id="heartbeat">Heartbeat</h2>
<p>Heartbeat is useful, when you want check connection from time to time. For example, if you working with mongodb and cache connection to db - what happens when server, which connection binded to goes to heaven? Connection is lost and programmer should recreate it.</p>
<p><strong>Note:</strong> for now there is no way to stop heartbeats.</p>
<pre><code class="lang-js">var connectOnce = require(&#39;connect-once&#39;);

var connection = new connectOnce({ 
    heartbeat: function (db, beat) {
        db.stats(function (err) {
            if (!err) { beat(); }
        });
    }
}, MongoClient.connect, &#39;mongodb://localhost/test&#39;);

connection.when(&#39;available&#39;, function (err, db) {
    // Do stuff
});
</code></pre>
<h2 id="api">API</h2>
<p>Read the <a href="http://floatdrop.github.io/connect-once/Connection.html">documentation of Connection class</a>. </p>
<h1 id="license">License</h1>
<p>(MIT License) (c) 2013 Vsevolod Strukchinsky (floatdrop@gmail.com)</p>
</article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Connection.html">Connection</a></li></ul><h3>Events</h3><ul><li><a href="Connection.html#event:available">available</a></li><li><a href="Connection.html#event:reconnect">reconnect</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha4</a> on Mon Mar 10 2014 01:07:20 GMT+0600 (YEKT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>